---
- block:
  - name: Update ip_sec_connection_tunnel_shared_secret with optional + required parameters
    oci_network_ip_sec_connection_tunnel_shared_secret:
      ipsc_id: "{{ dependency_ipsc_id | oracle.oci.override(test_ip_sec_connection_tunnel_shared_secret_update_optional_required_ipsc_id, omit) }}"
      tunnel_id: "{{ dependency_tunnel_id | oracle.oci.override(test_ip_sec_connection_tunnel_shared_secret_update_optional_required_tunnel_id, omit) }}"
      shared_secret: "{{ ('EXAMPLEToUis6j1cp8GdVQxcmdfMO0yXMLilZTbYCMDGu4V8oupdated' + random_suffix_1024) | oracle.oci.override(test_ip_sec_connection_tunnel_shared_secret_update_optional_required_shared_secret, omit) }}"
    register: result
    when: skip_ip_sec_connection_tunnel_shared_secret_update_optional_required_test is not defined

  - name: Assert resource was updated
    assert:
      that:
        - result.changed == True
    when: skip_ip_sec_connection_tunnel_shared_secret_update_optional_required_test is not defined

  - name: Assert response properties are populated
    assert:
      that:
        - result.ip_sec_connection_tunnel_shared_secret.shared_secret is defined
    when: skip_ip_sec_connection_tunnel_shared_secret_update_optional_required_test is not defined

  - name: Assert custom assertions
    assert:
      that:
        - "{{ item }}"
    with_items: "{{ ip_sec_connection_tunnel_shared_secret_update_optional_required_custom_assertions }}"
    when: ip_sec_connection_tunnel_shared_secret_update_optional_required_custom_assertions is defined

# ==================================================================================================== #

  - name: Update ip_sec_connection_tunnel_shared_secret with optional + required parameters (idempotence)
    oci_network_ip_sec_connection_tunnel_shared_secret:
      ipsc_id: "{{ dependency_ipsc_id | oracle.oci.override(test_ip_sec_connection_tunnel_shared_secret_update_optional_required_ipsc_id, omit) }}"
      tunnel_id: "{{ dependency_tunnel_id | oracle.oci.override(test_ip_sec_connection_tunnel_shared_secret_update_optional_required_tunnel_id, omit) }}"
      shared_secret: "{{ ('EXAMPLEToUis6j1cp8GdVQxcmdfMO0yXMLilZTbYCMDGu4V8oupdated' + random_suffix_1024) | oracle.oci.override(test_ip_sec_connection_tunnel_shared_secret_update_optional_required_shared_secret, omit) }}"
    register: result
    when: skip_ip_sec_connection_tunnel_shared_secret_update_optional_required_idempotence_test is not defined

  - name: Assert changed is False
    assert:
      that:
        - result.changed == False
    when: skip_ip_sec_connection_tunnel_shared_secret_update_optional_required_idempotence_test is not defined

  - name: Assert response properties are populated
    assert:
      that:
        - result.ip_sec_connection_tunnel_shared_secret.shared_secret is defined
    when: skip_ip_sec_connection_tunnel_shared_secret_update_optional_required_idempotence_test is not defined

  - name: Assert custom assertions
    assert:
      that:
        - "{{ item }}"
    with_items: "{{ ip_sec_connection_tunnel_shared_secret_update_optional_required_idempotence_custom_assertions }}"
    when: ip_sec_connection_tunnel_shared_secret_update_optional_required_idempotence_custom_assertions is defined

# ==================================================================================================== #

  - name: Get ip_sec_connection_tunnel_shared_secret
    oci_network_ip_sec_connection_tunnel_shared_secret_facts:
      ipsc_id: "{{ dependency_ipsc_id | oracle.oci.override(test_ip_sec_connection_tunnel_shared_secret_get_ipsc_id, omit) }}"
      tunnel_id: "{{ ip_sec_connection_tunnel_shared_secret_resource_id | oracle.oci.override(test_ip_sec_connection_tunnel_shared_secret_get_tunnel_id, omit) }}"
    register: result
    when: skip_ip_sec_connection_tunnel_shared_secret_get_test is not defined

  - name: Assert resource was listed
    assert:
      that:
        - result.ip_sec_connection_tunnel_shared_secret is defined
        - result.ip_sec_connection_tunnel_shared_secret != None
    when: skip_ip_sec_connection_tunnel_shared_secret_get_test is not defined

  - name: Assert response properties are populated
    assert:
      that:
        - item.shared_secret is defined
    with_items:
      - "{{ result.ip_sec_connection_tunnel_shared_secret }}"
    when: skip_ip_sec_connection_tunnel_shared_secret_get_test is not defined

  - name: Assert custom assertions
    assert:
      that:
        - "{{ item }}"
    with_items: "{{ ip_sec_connection_tunnel_shared_secret_get_custom_assertions }}"
    when: ip_sec_connection_tunnel_shared_secret_get_custom_assertions is defined

  always:
    - debug:
        msg: "Nothing to clean up since this resource does not have delete operation and also no dependencies."
